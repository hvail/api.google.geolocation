/**
 * Created by hvail on 2019/1/2.
 */
const redis = require("redis");
let redisClient;

function Custom(host, port, auth, fn, conf) {
    let me = this;
    let _redis = redis.createClient(port, host, {});
    auth && _redis.auth(auth);
    this.Instance = _redis;
    _redis.on('ready', () => me._init(_redis, fn, conf));
}

Custom.prototype._init = (custom, fn, conf) => {
    // this.Instance = custom;
    if (conf) {
        if (conf.Db) custom.select(conf.Db);
    }
    fn && fn(custom);
};

Custom.prototype.getInstance = () => {
    console.log(this);
    return this.Instance;
};

module.exports = Custom;